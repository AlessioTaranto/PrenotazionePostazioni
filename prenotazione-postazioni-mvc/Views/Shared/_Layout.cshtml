@{
    ViewData["Title"] = "Prenota postazioni";

    BookingViewModel ViewModel = (BookingViewModel)Model;
    ViewData["DateSelected"] = ViewModel.Date.ToString("dd/MM/yyyy");
}

@using System.Net;
@using Newtonsoft.Json;
@using prenotazione_postazioni_libs.Models;
@using Microsoft.AspNetCore.Http;

@inject IHttpContextAccessor HttpContextAccessor
@inject prenotazione_postazioni_mvc.HttpServices.UserHttpService _userHttpService;

<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta name="google-signin-client_id" content="989509766036-m7kb2is391d96vcs669p9t808ij9kjlp.apps.googleusercontent.com">

    <title>@ViewData["Title"] | Omnia Group</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/calendar.css">
    <link rel="stylesheet" href="css/impostazioni.css">
    <link rel="stylesheet" href="css/votazioni.css">
    <link rel="stylesheet" href="./_Layout.css">

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <script src="js/festivita-utils.js"></script>
    <script src="js/calendar.js"></script>
    <script src="js/calendarPresenze.js"></script>
    <script src="js/impostazioni.js"></script>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

</head>
<body>
<header>

        <div id="loader" class="loader"></div>


    <nav class="navbar_menu">
        <a class="navbar-brand" href="#">
            <img src="img/logo.png" alt="logo" class="logo-img">
        </a>

        <ul>
            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="Home" asp-action="Index">Postazioni</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="Vote" asp-action="Index">Rumorosità</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" asp-area="" asp-controller="Settings" asp-action="Index">Impostazioni</a>
            </li>
        </ul>
    </nav>

    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <style>
        .subnavigation {
        width: 100%;
        height: 5vw;
        padding: 2%;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        box-shadow: var(--shadow-color) 0px 10px 20px, var(--shadow-color) 0px 6px 6px;
        background-color: var(--bkg-color);
        }
        .subnavbar_title {
        display: flex;
        flex-direction: row;
        font-size: 1.3vw;
        gap: 1vw;
        color:var(--font-color);
        
        }
        .subnavbar_title_container {
        display: flex;
        flex-direction: row;
        width: 100%;
        }
    </style>
    <style media="all and (max-width: 700px)">
        .subnavigation{
                padding: 4%;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                height: auto;
                gap: 5vw;
            }
            .subnavbar_title {
                font-size: 3vw;
            }

    </style>


    <style>
        
            .theme-dark {
                --bkg-color: #2c2c2c;
                --font-color: white;
                --shadow-color: orange;
                --bkg1-color: black;
            }
            

            .theme-light {
                --bkg-color: white;
                --font-color: black;
                --shadow-color: rgba(0, 0, 0, 0.16 );
            }
            .coloreTesto{
                color: var(--font-color);
            }
            .btn {
                font-size: 17px;
                background: transparent;
                border: none;
                padding: 1em 1.5em;
                color: var(--font-color);
                text-transform: uppercase;
                position: relative;
            }

                .btn::before {
                    content: '';
                    position: absolute;
                    left: 0;
                    bottom: 0;
                    height: 2px;
                    width: 0;
                    background-color: darkorange;
                    transition: .5s ease;
                }

                .btn:hover {
                    color: var(--font-color);
                }

                    
                .btn:hover::before {
                    width: 100%;
                    
                }

              

                .btn:hover::after {
                    height: 100%;
                    color: aliceblue;
                }

    </style>


        <div idclass="mover"> </div>

    <div class="subnavigation">
            @{
                if(@ViewData["DateSelected"] != null && @ViewData["Title"].ToString() == "Prenota postazioni"){
                    <div class="subnavbar_title">
                            <a>Prenota postazione per il:</a>
                            <span style="font-weight: 700;">@ViewData["DateSelected"]</span>
                    </div>
                }else{
                    <div class="subnavbar_title">
                        <a>@ViewData["Title"]</a>
                    </div>
                }
            }
        
        <div>
                <button class="btn" onclick=" reloadPage(),toogleTheme(), toogleMap()">
                    Tema
                </button>


                <script>
                    function reloadPage() {
                        // Mostra il loader
                        document.getElementById("loader").style.display = "block";

                        // Ricarica la pagina
                        location.reload();
                    }

                    // Nasconde il loader quando la pagina è completamente caricata
                    window.addEventListener('load', function () {
                        document.getElementById("loader").style.display = "none";
                    });
                </script>
                <script>

                    function toogleMap(){

                      @ViewModel._ThemeViewModel.SetTheme();
                      
                    }
                    
                </script>

                <script>

                    function setTheme(themeName) {
                        localStorage.setItem('theme', themeName);
                        document.documentElement.className = themeName;
                    }

                    function toogleTheme() {
                        if (localStorage.getItem('theme') === 'theme-light') {

                            setTheme('theme-dark');


                        } else {
                            setTheme('theme-light');

                        }
                    }

                    //funzione che deve essere invocato al inizio del caricamento
                    (function () {

                        if (localStorage.getItem('theme') === 'theme-light') {
                            setTheme('theme-light');

                        } else {



                            setTheme('theme-dark');

                        }
                    })();

                </script>


        </div>

        <div class="order-3">
                    <a class="g-signin2" data-onsuccess="onSignIn" asp-area="" asp-controller="Home" asp-action="Login"></a>                
        </div>      
    </div>
 
    <script>
        function onSignIn(googleUser) {
            var profile = googleUser.getBasicProfile();
            console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
            console.log('Name: ' + profile.getName());
            console.log('Image URL: ' + profile.getImageUrl());
            console.log('Email: ' + profile.getEmail()); // This is null if the 'email' scope is not present.
        }

        function signOut() {
            var auth2 = gapi.auth2.getAuthInstance();
            auth2.signOut().then(function () {
                console.log('User signed out.');
            });
        }
    </script>
</header>

<main role="main">
    @RenderBody()
</main>

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

@await RenderSectionAsync("Scripts", required: false)

<!--Inerente alla pagina Prenotazioni. NON SPOSTARE -->
<script src="js/jquery.rwdImageMaps.min.js"></script>

<script>

    // Rende responsive le ImageMap
    $(document).ready(function() {
        $('img[usemap]').rwdImageMaps();

        
    });
</script>




</body>
</html>
